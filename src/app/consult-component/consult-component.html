<mat-card class="flex flex-col gap-3 m-3.5">
    <mat-card-header class="text-2xl">
        Consult User
    </mat-card-header>
    <form (submit)="searchUser()" class="flex flex-row" #frmSearch>
        <mat-card-content class="flex-1">
            <mat-form-field class="w-full">
                <mat-label>Search name</mat-label>
                <input type="text" matInput placeholder="Insert name of user" [(ngModel)]="searchTerm" name="searchTerm">
            </mat-form-field>
        </mat-card-content>
        <mat-card-actions>
            <button matButton="filled" type="submit" color="primary">
                <mat-icon>search</mat-icon>
                Search
            </button>
        </mat-card-actions>
    </form>
</mat-card>

<div class="flex flex-row flex-nowrap overflow-x-auto space-x-4 p-4 scrollbar-hide">
    <mat-card class="m-3 min-w-62.5 shrink-0">
        <mat-card-content>
            <table mat-table [dataSource]="userList">
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef> ID. </th>
                    <td mat-cell *matCellDef="let user"> {{user.id}} </td>
                </ng-container>
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef> NAME </th>
                    <td mat-cell *matCellDef="let user"> {{user.name}} </td>
                </ng-container>
                <ng-container matColumnDef="cpf">
                    <th mat-header-cell *matHeaderCellDef> CPF </th>
                    <td mat-cell *matCellDef="let user"> {{user.cpf}} </td>
                </ng-container>
                <ng-container matColumnDef="bithday">
                    <th mat-header-cell *matHeaderCellDef> BITHDAY </th>
                    <td mat-cell *matCellDef="let user"> {{user.bithday}} </td>
                </ng-container>
                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef> EMAIL </th>
                    <td mat-cell *matCellDef="let user"> {{user.email}} </td>
                </ng-container>
                <ng-container matColumnDef="uf">
                    <th mat-header-cell *matHeaderCellDef> UF </th>
                    <td mat-cell *matCellDef="let user"> {{user.uf}} </td>
                </ng-container>
                <ng-container matColumnDef="state">
                    <th mat-header-cell *matHeaderCellDef> STATE </th>
                    <td mat-cell *matCellDef="let user"> {{user.city}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let user" class="flex gap-1">
                        <button matButton="outlined" type="button" (click)="prepareEdit(user.id)">
                            <mat-icon>edit</mat-icon>
                            Update
                        </button>
                        @if (user.delete) {
                            <button matButton="outlined" type="button" (click)="deleteUser(user.id)" color="accent">
                                Confirm
                                <mat-icon>question_mark</mat-icon>
                            </button>
                        }@else {
                            <button matButton="outlined" type="button" (click)="prepareDelete(user)" color="accent">
                                <mat-icon>delete</mat-icon>
                                Delete
                            </button>
                        }
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="columnsTable"></tr>
                <tr mat-row *matRowDef="let row; columns: columnsTable;"></tr>
            </table>
        </mat-card-content>
    </mat-card>
</div>